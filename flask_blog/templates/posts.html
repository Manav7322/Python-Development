{% extends "base.html" %}

{% block title %}Posts{% endblock %}

{% block content %}
<h2>All Posts</h2>
{% for post in posts %}
<div class="post">
    <h3>{{ post.title }}</h3>
    <p>{{ post.content }}</p>
    <p><small>By {{ post.author.username }}</small></p>
    <p>Likes: {{ post.likes|length }}</p>

    {% if session.get('user_id') %}
    <form method="POST" action="{{ url_for('like_post', post_id=post.id) }}">
        <button type="submit">Like 👍</button>
    </form>
    {% endif %}
    <hr>
</div>
{% endfor %}
{% endblock %}
